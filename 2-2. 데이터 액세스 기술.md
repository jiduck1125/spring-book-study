# 데이터 액세스 기술
스프링의 데이터 액세스 기술과 구체적인 사용법 등을 알아보자.

## 공통 개념
스프링이 지원하는 데이터 액세스 기술에는 공통적으로 적용되는 원칙과 기본 개념이 있다.

### DAO 패턴
DAO 패턴은 DTO 또는 도메인 오브젝트만을 사용하는 인터페이스를 통해 데이터 액세스 기술을 외부에 노출하지 않도록 만드는 것이다. 이를 통해 DAO를 사용하는 코드에 영향을 주지 않고 데이터 액세스 기술을 변경하거나 여러 데이터 액세스 기술을 혼합해서 사용할 수 있게 해준다.
가장 중요한 장점은 DAO를 사용하는 서비스 계층의 코드를 기술이나 환경에 종속되지 않는 순수한 POJO로 개발할 수 있다는 것이다.

DAO의 장점을 누리기 위해 지켜야할 사항은 다음과 같다.
#### DAO 인터페이스와 DI
- DAO는 인터페이스를 이용해 접근하고 DI 되도록 만들어야 한다.
- 인터페이스에는 구체적인 데이터 액세스 기술과 관련된 API나 정보를 노출하지 않아야 한다.
- DAO를 사용하는 서비스 계층 코드에서 의미있는 메소드만 인터페이스로 공개해야 한다.
- 특정 데이터 액세스 기술에서만 의미있는 메소드 이름은 피하도록 한다.

#### 예외처리
- 데이터 액세스 중 발생하는 예외는 대부분 복구가 불가능하므로 런타임 예외로 던져져야 한다.
- 내부 기술을 드러내는 예외를 노출하지 않아야 한다.

### 템플릿과 API
데이터 액세스 기술을 사용하는 코드에서는 try/catch/finally와 같은 판에 박힌 반복되는 코드가 작성되기 쉽다.
스프링은 템플릿/콜백 패턴을 이용해 꼭 필요한 바뀌는 내용만 담을 수 있도록 템플릿을 제공한다.
템플릿은 반복되는 코드를 제거해줄 뿐만 아니라 예외 변환, 트랜잭션 동기화 기능도 함께 제공해준다.

### DataSource
스프링 데이터 액세스 기술의 다양한 서비스에서는 DataSource를 필요로 한다. 따라서 DataSource를 공유 가능한 스프링 빈으로 등록해줘야 한다. 다중 사용자를 갖는 엔터프라이즈 시스템이라면 반드시 DB 연결 풀 기능을 지원하는 DataSource를 사용해야 한다.