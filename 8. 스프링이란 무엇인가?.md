# 8. 스프링이란 무엇인가?

## 스프링의 정의
스프링에 대해 가장 잘 알려진 정의는 이렇다.

> 자바 엔터프라이즈 개발을 편하게 해주는 오픈소스 경량급 애플리케이션 프레임워크

이 정의를 풀어서 살펴보자.

- **애플리케이션 프레임워크** : 특정 계층이나, 기술, 업무 분야에 국한되지 않고 애플리케이션의 전 영역을 포괄하는 범용적인 프레임워크를 말한다. 애플리케이션 전 과정을 빠르고 편리하며 효율적으로 진행하는데 일차적인 목표를 두는 프레임워크다.
- **경량급** : 스프링은 불필요하게 무겁지 않다. 기존의 EJB와 같은 엔터프라이즈 기술이 복잡하고 무거운 개발환경을 필요로 했던 것과 반대로 스프링은 기본적인 단순한 환경에서도 충분히 엔터프라이즈 개발의 고급 기술을 사용할 수 있었다. 개발환경과 서버에만 국한된 것이 아니라 코드도 상대적으로 단순하고 가볍다.
- **자바 엔터프라이즈 개발을 편하게** : 스프링은 개발자가 자신이 작성하는 애플리케이션 로직에 더 많은 관심과 시간을 쏟게 해준다. 스프링은 엔터프라이즈 개발의 기술적인 복잡함과 그에 따른 수고를 제거해준다.
- **오픈소스** : 스프링은 오픈소스 프로젝트 방식으로 개발되고 있다.

## 스프링의 목적
엔터프라이즈 개발이 복잡한 이유는 크게 두 가지로 생각해볼 수 있다.
- 기술적인 제약조건과 요구사항이 늘어난다.
- 엔터프라이즈 애플리케이션이 구현해야할 핵심 기능인 비즈니스 로직의 복잡함이 증가한다.

엔터프라이즈 개발이 복잡한 가장 큰 이유는 비즈니스 로직과 엔터프라이즈 기술이라는 두 가지 복잡함이 한데 얽혀있기 때문이다.

스프링은 기술적인 복잡함을 애플리케이션 핵심 로직의 복잡함에서 제거하는데 비침투적인 방식을 선택했다.
애플리케이션 코드에 기술 코드가 직접 노출되지 않게 하는 것이다.
스프링을 통해 성격이 다른 복잡함을 깔끔하게 분리해줘서 각각을 효과적으로 상대할 수 있는 기반이 마련됐다.

스프링은 기술과 비즈니스 로직의 복잡함을 해결하는데 객체지향과 DI를 사용했다.
스프링의 기본 전략은 자바의 기본인 객체지향에 충실한 설계가 가능하도록 단순한 오브젝트로 개발할 수 있고, 객체지향의 설계 기법을 잘 적용할 수 있는 구조를 만들기 위해 DI 같은 유용한 기술을 편하게 적용하도록 도와주는 것이다. 

## POJO 프로그래밍
POJO란 Plain Old Java Object의 약자이다.

POJO는 적어도 다음의 조건을 충족해야 한다.
- 특정 규약에 종속되지 않는다. 자바 언어와 꼭 필요한 API 외에는 종속되지 않아야 한다. 객체지향의 자유로운 적용이 가능한 오브젝트여야 한다.
- 특정 환경에 종속되지 않는다. 특정 서버나 프레임워크, 기술에 의존해선 안된다.

진정한 POJO는 객체지향적인 원리에 충실하면서, 환경과 기술에 종속되지 않고 필요에 따라 재활용될 수 있는 방식으로 설계된 오브젝트이다.

### POJO의 장점
- 특정 기술과 환경에 종속되지 않는 오브젝트는 그만큼 깔끔한 코드가 된다.
- 어떤 환경에 종속되지 않기 때문에 자동화된 테스트에 매우 유리하다.
- 객체지향적인 설계를 자유롭게 적용할 수 있다.

### POJO 프레임워크
스프링은 엔터프라이즈 애플리케이션 개발의 모든 영역과 계층에서 POJO 방식의 구현이 가능하게 하려는 목적으로 만들어졌다.
스프링은 기술영역에만 관여하고, 비즈니스 로직을 담당하는 POJO에서는 모습을 감추면서 애플리케이션 개발을 POJO로 쉽게 개발할 수 있게 해준다.

## 스프링의 기술
스프링은 POJO 프로그래밍을 손쉽게 할 수 있도록 지원하는 세 가지 가능기술을 제공한다.

### IoC/DI
IoC/DI의 활용 방법을 살펴보자. IoC/DI를 사용하는 이유는 유연한 확장이 가능하게 하기 위해서이다.

- **핵심기능의 변경** : DI 설정을 통해 의존 대상의 구현을 바꿀 수 있다.
- **핵심기능의 동적인 변경** : 애플리케이션이 동작하는 중간에 그 의존 대상을 다이내믹하게 변경할 수 있다. 기술적으로 보자면 다이내믹 라우팅 프록시나 프록시 오브젝트 기법을 활용한 것인데, 이런 기법을 적용하려면 DI가 있어야 한다.
- **부가기능의 추가** : 핵심기능은 그대로 둔 채로 부가기능을 추가하는 것이다. 데코레이터 패턴이 그 예시다.
- **인터페이스의 변경** : 인터페이스가 다른 다양한 구현을 같은 방식으로 사용하도록 중간에 어댑터 역할을 하는 레이어를 추가하고 DI를 통해 어댑터 오브젝트를 이용하게 하는 것이다.
- **프록시** : 필요한 시점에 실제 사용할 오브젝트를 초기화하고 리소스를 준비하게 해주는 지연된 로딩(lazy loading)을 적용하려면 프록시가 필요한데, 프록시는 DI를 필요로 한다.
- **템플릿과 콜백** : 템플릿/콜백 패턴은 DI의 원리가 적용된 방식이다.
- **싱글톤과 오브젝트 스코프** : 스프링의 DI는 오브젝트를 싱글톤으로 사용할 수 있게 해준다. 싱글톤이 아니라 임의의 생명주기를 갖는 오브젝트도 DI를 통해 제어한다.
- **테스트** : 테스트 대역을 활용할때 DI를 위해 만든 수정자 메소드를 사용해 수동으로 주입한다.

### AOP
AOP는 객체지향 기술의 한계와 단점을 극복하도록 도와준다.

AOP를 적용하는 기법은 크게 두 가지가 있다.
- 스프링 다이내믹 프록시를 사용하는 방법이다. 이 방법은 데코레이터 패턴을 응용한 것이다. 부가기능을 부여할 수 있는 곳이 메소드 호출이 일어나는 지점 뿐이라는 제약이 있다.
- 자바 언어의 한계를 넘어서는 언어의 확장을 이용하는 방법이다. AspectJ라는 AOP 툴은 프록시 방식의 AOP에서는 불가능한 다양한 조인포인트를 제공한다. 이런 기능을 제공하기 위해 별도 AOP 컴파일러를 이용한 빌드 과정을 거치거나, 클래스가 메모리로 로딩될 때 바이트코드를 조작하는 위빙과 같은 별도의 방법을 이용한다.

### PSA
PSA(Portable Service Abstraction)는 환경과 세부 기술의 변화에 관계없이 일관된 방식으로 접근할 수 있게 해주는 기술이다.
스프링은 POJO 코드가 특정 환경과 기술에 종속되지 않게 하기 위해 일관성 있는 추상화 기능을 제공한다.